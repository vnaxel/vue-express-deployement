(function(){"use strict";var t={142:function(t,i,n){var o=n(963),e=n(252);const s=(0,e._)("div",{class:"card title"},[(0,e._)("h1",null,"Express + VueJS ðŸ”¥ðŸ”¥ðŸ”¥")],-1);function a(t,i,n,o,a,c){const l=(0,e.up)("PublicationsList");return(0,e.wg)(),(0,e.iD)("div",null,[s,(0,e.Wm)(l)])}function c(t,i,n,o,s,a){const c=(0,e.up)("SearchPublications"),l=(0,e.up)("AddPublication"),r=(0,e.up)("PublicationItem");return(0,e.wg)(),(0,e.iD)("div",null,[s.publishMode?(0,e.kq)("",!0):((0,e.wg)(),(0,e.j4)(c,{key:0,onSearchPublications:a.searchPublications,onLastSearch:a.lastSearch,onTogglePublish:i[0]||(i[0]=t=>s.publishMode=!0),resultats:this.resultats},null,8,["onSearchPublications","onLastSearch","resultats"])),s.publishMode?((0,e.wg)(),(0,e.j4)(l,{key:1,onAddPublication:a.addPublication,onTogglePublish:i[1]||(i[1]=t=>s.publishMode=!1)},null,8,["onAddPublication"])):(0,e.kq)("",!0),((0,e.wg)(!0),(0,e.iD)(e.HY,null,(0,e.Ko)(s.publications,(t=>((0,e.wg)(),(0,e.j4)(r,{publication:t,key:t._id,onDeletePublication:i=>a.deletePublication(t._id),onEditPublication:a.editPublication},null,8,["publication","onDeletePublication","onEditPublication"])))),128))])}var l=n(577);const r=t=>((0,e.dD)("data-v-1803045b"),t=t(),(0,e.Cn)(),t),u={class:"publication card"},d={key:0,class:"publication__content"},h={key:2,class:"publication__modify"},p={class:"publication__modify__row0"},b=r((()=>(0,e._)("h2",null,"Mode Edition",-1))),_={class:"publication__modify__row1"},f={class:"publication__modify__row2"},m=r((()=>(0,e._)("div",{class:"publication__modify__row2__grow"},null,-1)));function P(t,i,n,s,a,c){const r=(0,e.up)("font-awesome-icon");return(0,e.wg)(),(0,e.iD)("div",u,[a.modify?(0,e.kq)("",!0):((0,e.wg)(),(0,e.iD)("div",d,(0,l.zw)(n.publication.content),1)),a.modify?(0,e.kq)("",!0):((0,e.wg)(),(0,e.iD)("div",{key:1,onClick:i[0]||(i[0]=(...t)=>c.openModifyPanel&&c.openModifyPanel(...t)),class:"publication__option"},[(0,e.Wm)(r,{icon:"ellipsis-vertical"})])),a.modify?((0,e.wg)(),(0,e.iD)("div",h,[(0,e._)("div",p,[b,(0,e._)("div",{class:"icon-cancel",onClick:i[1]||(i[1]=t=>a.modify=!1)},[(0,e.Wm)(r,{icon:"xmark"})])]),(0,e._)("div",_,[(0,e.wy)((0,e._)("textarea",{"onUpdate:modelValue":i[2]||(i[2]=t=>a.editing=t)},null,512),[[o.nr,a.editing]])]),(0,e._)("div",f,[(0,e._)("button",{class:"btn btn--delete",onClick:i[3]||(i[3]=i=>t.$emit("deletePublication"))},[(0,e.Wm)(r,{icon:"trash"})]),m,(0,e._)("button",{class:"btn btn--edit",onClick:i[4]||(i[4]=(...t)=>c.editPublication&&c.editPublication(...t))},[(0,e.Wm)(r,{icon:"pen-to-square"})])])])):(0,e.kq)("",!0)])}var g={name:"PublicationItem",props:["publication"],data(){return{editing:this.publication.content,modify:!1}},methods:{editPublication(){this.$emit("editPublication",this.publication._id,this.editing),this.modify=!1},openModifyPanel(){this.modify=!0,this.editing=this.publication.content}}},v=n(744);const w=(0,v.Z)(g,[["render",P],["__scopeId","data-v-1803045b"]]);var y=w;const k={class:"addPublication card"},j={class:"addPublication__row"};function S(t,i,n,s,a,c){return(0,e.wg)(),(0,e.iD)("div",k,[(0,e.wy)((0,e._)("textarea",{"onUpdate:modelValue":i[0]||(i[0]=t=>a.content=t),placeholder:"Ecrivez un nouveau post...",class:"addPublication__input"},null,512),[[o.nr,a.content]]),(0,e._)("div",j,[(0,e._)("button",{onClick:i[1]||(i[1]=t=>c.addPublication(a.content)),class:"addPublication__row__btn btn"}," publier "),(0,e._)("a",{class:"link",onClick:i[2]||(i[2]=i=>t.$emit("togglePublish"))},"Rechercher des publications")])])}var C={name:"AddPublication",data(){return{content:""}},methods:{addPublication(){this.$emit("addPublication",this.content),this.content=""}}};const D=(0,v.Z)(C,[["render",S],["__scopeId","data-v-23756dc2"]]);var O=D;const T={class:"card"},E={class:"searchPublications__row"},M={class:"group"},$={key:0,class:"resultats"};function A(t,i,n,s,a,c){return(0,e.wg)(),(0,e.iD)("div",T,[(0,e.wy)((0,e._)("input",{"onUpdate:modelValue":i[0]||(i[0]=t=>a.search=t),placeholder:"Recherchez des publications...",class:"searchPublications__input"},null,512),[[o.nr,a.search]]),(0,e._)("div",E,[(0,e._)("div",M,[(0,e._)("button",{onClick:i[1]||(i[1]=t=>c.searchPublications(a.search)),class:"searchPublications__row__btn btn"}," rechercher "),n.resultats?((0,e.wg)(),(0,e.iD)("span",$,"Resultats : "+(0,l.zw)(n.resultats),1)):(0,e.kq)("",!0)]),(0,e._)("a",{class:"link",onClick:i[2]||(i[2]=i=>t.$emit("togglePublish"))},"Ecrire une publication")])])}var q={name:"SearchPublications",props:["resultats","lastSearch"],data(){return{search:""}},methods:{searchPublications(){this.$emit("lastSearch",this.search),this.$emit("searchPublications",this.search),this.search=""}}};const x=(0,v.Z)(q,[["render",A],["__scopeId","data-v-35e2fcd7"]]);var L=x,I={name:"PublicationsList",components:{AddPublication:O,SearchPublications:L,PublicationItem:y},data(){return{publications:{},publishMode:!1,resultats:0,search:""}},mounted(){const t=new WebSocket("wss://api-posts-list.herokuapp.com");t.addEventListener("open",(()=>{console.log("connected to the ws server")})),t.addEventListener("message",(()=>{this.publishMode?this.getPublications():!1===this.publishMode&&this.searchPublications(this.search)}))},methods:{getPublications(){fetch("https://api-posts-list.herokuapp.com/api/publications").then((t=>t.json())).then((t=>{this.publications=t.data.reverse(),this.resultats=t.data.length}))},lastSearch(t){this.search=t},searchPublications(t){fetch(`https://api-posts-list.herokuapp.com/api/publications/query?search=${t}`).then((t=>t.json())).then((t=>{t.success?(this.publications=t.data.reverse(),this.resultats=t.data.length):console.log(t)}))},addPublication(t){const i={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json;charset=UTF-8"},body:JSON.stringify({content:t})};fetch("https://api-posts-list.herokuapp.com/api/publications",i).then((t=>t.json())).then((t=>{t.success?this.getPublications():console.log(t.msg)})).catch((t=>console.log(t)))},editPublication(t,i){const n={method:"PATCH",headers:{Accept:"application/json","Content-Type":"application/json;charset=UTF-8"},body:JSON.stringify({content:i})};fetch(`https://api-posts-list.herokuapp.com/api/publications/${t}`,n).then((t=>t.json())).then((t=>{t.success?this.getPublications():console.log(t.msg)})).catch((t=>console.log(t)))},deletePublication(t){const i={method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json;charset=UTF-8"}};fetch(`https://api-posts-list.herokuapp.com/api/publications/${t}`,i).then((t=>t.json())).then((t=>{t.success||console.log(t.msg),this.getPublications()})).catch((t=>console.log(t)))}}};const U=(0,v.Z)(I,[["render",c]]);var W=U,Z={name:"App",components:{PublicationsList:W}};const z=(0,v.Z)(Z,[["render",a]]);var F=z,V=n(947),J=n(436),N=n(810);V.vI.add(J.Uwo,J.$aW,J.Yai,J.g82),(0,o.ri)(F).component("font-awesome-icon",N.GN).mount("#app")}},i={};function n(o){var e=i[o];if(void 0!==e)return e.exports;var s=i[o]={exports:{}};return t[o](s,s.exports,n),s.exports}n.m=t,function(){var t=[];n.O=function(i,o,e,s){if(!o){var a=1/0;for(u=0;u<t.length;u++){o=t[u][0],e=t[u][1],s=t[u][2];for(var c=!0,l=0;l<o.length;l++)(!1&s||a>=s)&&Object.keys(n.O).every((function(t){return n.O[t](o[l])}))?o.splice(l--,1):(c=!1,s<a&&(a=s));if(c){t.splice(u--,1);var r=e();void 0!==r&&(i=r)}}return i}s=s||0;for(var u=t.length;u>0&&t[u-1][2]>s;u--)t[u]=t[u-1];t[u]=[o,e,s]}}(),function(){n.d=function(t,i){for(var o in i)n.o(i,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:i[o]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)}}(),function(){var t={143:0};n.O.j=function(i){return 0===t[i]};var i=function(i,o){var e,s,a=o[0],c=o[1],l=o[2],r=0;if(a.some((function(i){return 0!==t[i]}))){for(e in c)n.o(c,e)&&(n.m[e]=c[e]);if(l)var u=l(n)}for(i&&i(o);r<a.length;r++)s=a[r],n.o(t,s)&&t[s]&&t[s][0](),t[s]=0;return n.O(u)},o=self["webpackChunkfront"]=self["webpackChunkfront"]||[];o.forEach(i.bind(null,0)),o.push=i.bind(null,o.push.bind(o))}();var o=n.O(void 0,[998],(function(){return n(142)}));o=n.O(o)})();
//# sourceMappingURL=app.afd2515d.js.map